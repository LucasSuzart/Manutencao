import{d as O,u as S,a as M,c as m,b as v,o as c,e,f as B,g as D,w as l,h as k,t as d,i as t,A as T,j as o,S as u,D as C,k as y,P as f,B as _,F as x,r as A,_ as N}from"./index-hUmahst3.js";const P={class:"dashboard"},R={class:"stats-section"},V={class:"stats-grid"},E={class:"main-grid"},F={class:"card-header"},H={class:"card-info"},W={class:"card-header"},j={class:"card-info"},I={key:0,class:"empty-state"},L={key:1,class:"assets-list"},q={class:"asset-info"},G={class:"asset-code"},z={class:"asset-name"},J={class:"asset-criticality"},K={class:"metrics-grid"},Q={class:"metric-item"},U={class:"metric-content"},X={class:"metric-value"},Y={class:"metric-item"},Z={class:"metric-content"},$={class:"metric-value"},ee={class:"metric-item"},se={class:"metric-content"},te={class:"metric-value"},ae={class:"metric-item"},re={class:"metric-content"},oe={class:"metric-value"},ie=O({__name:"DashboardView",setup(le){const i=S(),b=M(),n=m(()=>i.kpis),h=m(()=>i.workOrders.filter(a=>a.status!=="completed"&&a.status!=="canceled"&&a.plannedEnd&&new Date(a.plannedEnd)<new Date)),p=m(()=>b.assets.filter(a=>a.status==="maintenance")),g=m(()=>i.workOrders.slice(0,10)),w=[{key:"code",label:"Código",format:(a,s)=>a||s.id.substring(0,8)},{key:"title",label:"Título"},{key:"status",label:"Status",format:a=>a,component:y,props:{type:"workorder"}},{key:"priority",label:"Prioridade",format:a=>a,component:"PriorityBadge"},{key:"plannedStart",label:"Planejado",format:a=>a?new Date(a).toLocaleDateString("pt-BR"):"-"}];return(a,s)=>(c(),v("div",P,[s[14]||(s[14]=e("div",{class:"dashboard-header"},[e("div",{class:"header-content"},[e("h1",{class:"dashboard-title"},"📊 Dashboard de Manutenção"),e("p",{class:"dashboard-subtitle"},"Visão geral do sistema de manutenção")])],-1)),h.value.length>0?(c(),B(t(T),{key:0,type:"warning",title:"⚠️ Atenção",class:"alert-section"},{default:l(()=>[s[0]||(s[0]=k(" Existem ",-1)),e("strong",null,d(h.value.length),1),s[1]||(s[1]=k(" ordens de serviço atrasadas que precisam de atenção imediata. ",-1))]),_:1})):D("",!0),e("div",R,[e("div",V,[o(t(u),{title:"⏱️ MTTR (Tempo Médio de Reparo)",value:n.value.mttrHours||0,unit:"horas",color:"primary"},null,8,["value"]),o(t(u),{title:"🔄 MTBF (Tempo Médio Entre Falhas)",value:n.value.mtbfHours||0,unit:"horas",color:"primary"},null,8,["value"]),o(t(u),{title:"✅ Disponibilidade",value:n.value.availabilityPercent||0,unit:"%",color:"success"},null,8,["value"]),o(t(u),{title:"📋 OS Abertas",value:t(i).open.length,decimals:0,color:"warning"},null,8,["value"]),o(t(u),{title:"📊 Total de OS",value:n.value.totalWorkOrders||0,decimals:0,color:"primary"},null,8,["value"]),o(t(u),{title:"🎯 OS Concluídas",value:t(i).workOrders.filter(r=>r.status==="completed").length,decimals:0,color:"success"},null,8,["value"])])]),e("div",E,[o(t(_),{class:"recent-workorders-card"},{header:l(()=>[e("div",F,[s[2]||(s[2]=e("h3",null,"📋 Ordens de Serviço Recentes",-1)),e("div",H,d(g.value.length)+" registros ",1)])]),default:l(()=>[o(t(C),{data:g.value,columns:w,"items-per-page":5,"empty-message":"Nenhuma ordem de serviço encontrada",class:"workorders-table"},{status:l(({value:r})=>[o(t(y),{status:r,type:"workorder",readonly:""},null,8,["status"])]),priority:l(({value:r})=>[o(t(f),{priority:r},null,8,["priority"])]),_:1},8,["data"])]),_:1}),o(t(_),{class:"maintenance-assets-card"},{header:l(()=>[e("div",W,[s[3]||(s[3]=e("h3",null,"🔧 Ativos em Manutenção",-1)),e("div",j,d(p.value.length)+" ativos ",1)])]),default:l(()=>[p.value.length===0?(c(),v("div",I,[...s[4]||(s[4]=[e("div",{class:"empty-icon"},"✅",-1),e("p",null,"Nenhum ativo em manutenção no momento",-1)])])):(c(),v("div",L,[(c(!0),v(x,null,A(p.value,r=>(c(),v("div",{key:r.id,class:"asset-item"},[e("div",q,[e("div",G,d(r.code),1),e("div",z,d(r.name),1)]),e("div",J,[o(t(f),{priority:r.criticality},null,8,["priority"])])]))),128))]))]),_:1}),o(t(_),{class:"metrics-card"},{header:l(()=>[...s[5]||(s[5]=[e("h3",null,"📈 Métricas de Manutenção",-1)])]),default:l(()=>[e("div",K,[e("div",Q,[s[7]||(s[7]=e("div",{class:"metric-icon"},"🔧",-1)),e("div",U,[s[6]||(s[6]=e("div",{class:"metric-label"},"Corretivas vs. Preventivas",-1)),e("div",X,d(Math.round(t(i).workOrders.filter(r=>r.type==="preventive").length/(t(i).workOrders.length||1)*100))+"% preventivas ",1)])]),e("div",Y,[s[9]||(s[9]=e("div",{class:"metric-icon"},"🎯",-1)),e("div",Z,[s[8]||(s[8]=e("div",{class:"metric-label"},"Taxa de Conclusão",-1)),e("div",$,d(Math.round(t(i).workOrders.filter(r=>r.status==="completed").length/(t(i).workOrders.length||1)*100))+"% ",1)])]),e("div",ee,[s[11]||(s[11]=e("div",{class:"metric-icon"},"⚡",-1)),e("div",se,[s[10]||(s[10]=e("div",{class:"metric-label"},"Tempo Médio de Resposta",-1)),e("div",te,d(n.value.avgResponseHours?n.value.avgResponseHours.toFixed(1)+"h":"N/A"),1)])]),e("div",ae,[s[13]||(s[13]=e("div",{class:"metric-icon"},"📊",-1)),e("div",re,[s[12]||(s[12]=e("div",{class:"metric-label"},"Eficiência Geral",-1)),e("div",oe,d(Math.round(t(i).workOrders.filter(r=>r.status==="completed").length/(t(i).workOrders.length||1)*100*.8))+"% ",1)])])])]),_:1})])]))}}),ne=N(ie,[["__scopeId","data-v-a83da7ae"]]);export{ne as default};

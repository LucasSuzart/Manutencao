import{d as I,u as B,a as O,l as m,c as A,b as D,o as S,j as b,w as o,e as t,t as r,i as n,B as T,q as y,s as _,F as x,r as U,v as w,D as E,k as L,_ as W}from"./index-CEWcok4S.js";const h={class:"work-order-history"},H={class:"stats-grid"},M={class:"stat-card"},N={class:"stat-content"},R={class:"stat-value"},j={class:"stat-card"},q={class:"stat-content"},z={class:"stat-value"},G={class:"stat-card"},J={class:"stat-content"},K={class:"stat-value"},Q={class:"stat-card"},X={class:"stat-content"},Y={class:"stat-value"},Z={class:"filters-grid"},$={class:"filter-group"},ee={class:"filter-group"},te=["value"],se={class:"filter-group"},ae={class:"filter-group"},le={class:"filter-group"},oe={class:"table-header"},ie={class:"table-info"},re=I({__name:"WorkOrderHistoryView",setup(ne){const C=B(),g=O(),d=m(""),u=m(""),v=m(""),p=m(""),c=m(""),i=A(()=>C.workOrders.filter(s=>{const e=!d.value||s.status===d.value,a=!u.value||s.assetId===u.value,k=!v.value||s.type===v.value,l=s.startedAt||s.createdAt,P=!p.value||l&&l>=p.value,F=!c.value||l&&l<=c.value+"T23:59:59";return e&&a&&k&&P&&F})),V=[{key:"code",label:"Código OS",sortable:!0,format:(s,e)=>s||e.id.substring(0,8)},{key:"title",label:"Título",sortable:!0},{key:"assetId",label:"Ativo",format:s=>{var e;return s&&((e=g.byId(s))==null?void 0:e.name)||"-"}},{key:"status",label:"Status"},{key:"type",label:"Tipo",format:s=>({corrective:"Corretiva",preventive:"Preventiva",predictive:"Preditiva",inspection:"Inspeção"})[s]||s},{key:"priority",label:"Prioridade",format:s=>({low:"Baixa",medium:"Média",high:"Alta",critical:"Crítica"})[s]||s},{key:"startedAt",label:"Data Início",sortable:!0,format:s=>s?new Date(s).toLocaleDateString("pt-BR"):"-"},{key:"completedAt",label:"Data Fim",sortable:!0,format:s=>s?new Date(s).toLocaleDateString("pt-BR"):"-"},{key:"createdAt",label:"Criado em",sortable:!0,format:s=>s?new Date(s).toLocaleDateString("pt-BR"):"-"}];[...g.assets.map(s=>({value:s.id,label:s.name}))];const f=A(()=>{const s=i.value.length,e=i.value.filter(l=>l.status==="completed").length,a=i.value.filter(l=>l.status==="in_progress").length,k=i.value.filter(l=>l.status==="open").length;return{total:s,completed:e,inProgress:a,open:k}});return(s,e)=>(S(),D("div",h,[b(n(T),{class:"history-header"},{header:o(()=>[...e[5]||(e[5]=[t("div",{class:"header-content"},[t("h1",{class:"page-title"},"📋 Histórico de Ordens de Serviço"),t("p",{class:"page-subtitle"},"Acompanhe todas as ordens de serviço do sistema")],-1)])]),default:o(()=>[t("div",H,[t("div",M,[e[7]||(e[7]=t("div",{class:"stat-icon"},"📊",-1)),t("div",N,[t("div",R,r(f.value.total),1),e[6]||(e[6]=t("div",{class:"stat-label"},"Total de OS",-1))])]),t("div",j,[e[9]||(e[9]=t("div",{class:"stat-icon"},"✅",-1)),t("div",q,[t("div",z,r(f.value.completed),1),e[8]||(e[8]=t("div",{class:"stat-label"},"Concluídas",-1))])]),t("div",G,[e[11]||(e[11]=t("div",{class:"stat-icon"},"🔄",-1)),t("div",J,[t("div",K,r(f.value.inProgress),1),e[10]||(e[10]=t("div",{class:"stat-label"},"Em Andamento",-1))])]),t("div",Q,[e[13]||(e[13]=t("div",{class:"stat-icon"},"⏳",-1)),t("div",X,[t("div",Y,r(f.value.open),1),e[12]||(e[12]=t("div",{class:"stat-label"},"Abertas",-1))])])])]),_:1}),b(n(T),{class:"filters-section"},{header:o(()=>[...e[14]||(e[14]=[t("h3",null,"🔍 Filtros",-1)])]),default:o(()=>[t("div",Z,[t("div",$,[e[16]||(e[16]=t("label",null,"Status",-1)),y(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),class:"filter-select"},[...e[15]||(e[15]=[t("option",{value:""},"Todos",-1),t("option",{value:"open"},"Aberto",-1),t("option",{value:"in_progress"},"Em Progresso",-1),t("option",{value:"paused"},"Pausado",-1),t("option",{value:"completed"},"Concluído",-1),t("option",{value:"canceled"},"Cancelado",-1)])],512),[[_,d.value]])]),t("div",ee,[e[18]||(e[18]=t("label",null,"Ativo",-1)),y(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),class:"filter-select"},[e[17]||(e[17]=t("option",{value:""},"Todos",-1)),(S(!0),D(x,null,U(n(g).assets,a=>(S(),D("option",{key:a.id,value:a.id},r(a.name),9,te))),128))],512),[[_,u.value]])]),t("div",se,[e[20]||(e[20]=t("label",null,"Tipo",-1)),y(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>v.value=a),class:"filter-select"},[...e[19]||(e[19]=[t("option",{value:""},"Todos",-1),t("option",{value:"corrective"},"Corretiva",-1),t("option",{value:"preventive"},"Preventiva",-1),t("option",{value:"predictive"},"Preditiva",-1),t("option",{value:"inspection"},"Inspeção",-1)])],512),[[_,v.value]])]),t("div",ae,[e[21]||(e[21]=t("label",null,"Data Inicial",-1)),y(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=a=>p.value=a),class:"filter-input"},null,512),[[w,p.value]])]),t("div",le,[e[22]||(e[22]=t("label",null,"Data Final",-1)),y(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=a=>c.value=a),class:"filter-input"},null,512),[[w,c.value]])])])]),_:1}),b(n(T),{class:"data-section"},{header:o(()=>[t("div",oe,[e[23]||(e[23]=t("h3",null,"📋 Ordens de Serviço",-1)),t("div",ie,r(i.value.length)+" registros encontrados ",1)])]),default:o(()=>[b(n(E),{data:i.value,columns:V,"items-per-page":15,"empty-message":"Nenhuma ordem de serviço encontrada com os filtros aplicados",class:"work-orders-table"},{status:o(({value:a})=>[b(n(L),{status:a,type:"workorder",readonly:""},null,8,["status"])]),_:1},8,["data"])]),_:1})]))}}),ue=W(re,[["__scopeId","data-v-5aad0b71"]]);export{ue as default};

import{d as O,I as P,m as y,c as U,b as n,o as l,e as s,j as r,w as u,h as p,i as d,s as m,F as b,r as L,B as T,J as V,K as j,x as $,t as k,M as G,y as A,g,L as z,_ as H}from"./index-hUmahst3.js";const J={class:"location-manager page"},K={class:"page-header"},Q={class:"page-header__actions"},W={class:"tree-container"},X={key:0,class:"empty-state"},Y={key:1,class:"location-tree"},Z={class:"node-content"},N=["onClick"],ee={key:0},ae={key:1},se={key:1,class:"toggle-placeholder"},te={class:"node-label"},ne={class:"node-name"},le={key:0,class:"node-code"},oe={class:"node-actions"},ie={key:0,class:"node-children"},de={class:"node-content"},re=["onClick"],ue={key:0},ve={key:1},ce={key:1,class:"toggle-placeholder"},pe={class:"node-label"},me={class:"node-name"},_e={key:0,class:"node-code"},fe={class:"node-actions"},ke={key:0,class:"node-children"},he={class:"node-content"},Ce={class:"node-label"},ge={class:"node-name"},ye={key:0,class:"node-code"},be={class:"node-actions"},xe={class:"form-grid"},h="null",Ie=O({__name:"LocationManager",setup(Le){const _=P(),f=y(!1),t=y({name:"",code:"",parentId:h,description:""}),v=y(null),C=y([]);function E(o){const e=C.value.indexOf(o);e>=0?C.value.splice(e,1):C.value.push(o)}function D(o){return C.value.includes(o)}function q(){t.value.name&&(_.add({name:t.value.name,code:t.value.code||void 0,parentId:t.value.parentId===h?void 0:t.value.parentId,description:t.value.description||void 0}),t.value.parentId!==h&&!C.value.includes(t.value.parentId)&&C.value.push(t.value.parentId),B(),f.value=!1)}function x(o){v.value=o,t.value={name:o.name,code:o.code||"",parentId:o.parentId||h,description:o.description||""},f.value=!0}function w(){!v.value||!t.value.name||(_.update(v.value.id,{name:t.value.name,code:t.value.code||void 0,parentId:t.value.parentId===h?void 0:t.value.parentId,description:t.value.description||void 0}),B(),f.value=!1)}function B(){v.value=null,t.value={name:"",code:"",parentId:h,description:""}}function I(o){_.locations.some(a=>a.parentId===o)&&!confirm("Este local possui sublocais que tamb√©m ser√£o removidos. Deseja continuar?")||_.remove(o)}function M(o,e=0){return!o||o.length===0?[]:o.map(a=>{const i=!!(a.children&&a.children.length>0);return{...a,level:e,hasChildren:i,expanded:D(a.id),childrenRendered:i?M(a.children||[],e+1):[]}})}const R=U(()=>M(_.tree)),F=U(()=>[{value:h,label:"-- Nenhum (raiz) --"},..._.locations.map(o=>({value:o.id,label:o.name}))]);return(o,e)=>(l(),n(b,null,[s("div",J,[s("div",K,[e[10]||(e[10]=s("div",{class:"page-header__content"},[s("h1",{class:"page-title"},"Localiza√ß√µes"),s("p",{class:"page-subtitle"},"Gerencie a hierarquia de locais para equipamentos e estoque")],-1)),s("div",Q,[r(d(m),{variant:"primary",onClick:e[0]||(e[0]=a=>f.value=!0)},{default:u(()=>[...e[9]||(e[9]=[p(" Novo Local ",-1)])]),_:1})])]),r(d(T),{class:"tree-card"},{header:u(()=>[...e[11]||(e[11]=[s("div",{class:"card-header"},[s("h3",null,"Estrutura Hier√°rquica")],-1)])]),default:u(()=>[s("div",W,[R.value.length===0?(l(),n("div",X,[...e[12]||(e[12]=[s("p",null,'Nenhum local cadastrado. Clique em "Novo Local" para come√ßar.',-1)])])):(l(),n("div",Y,[(l(!0),n(b,null,L(R.value,a=>(l(),n("div",{key:a.id,class:A(["tree-node",{"has-children":a.hasChildren}])},[s("div",Z,[s("div",{class:"node-indent",style:z({width:`${a.level*20}px`})},null,4),a.hasChildren?(l(),n("button",{key:0,class:"toggle-btn",onClick:$(i=>E(a.id),["stop"])},[a.expanded?(l(),n("span",ee,"‚ñº")):(l(),n("span",ae,"‚ñ∂"))],8,N)):(l(),n("span",se)),e[15]||(e[15]=s("div",{class:"node-icon"},[s("span",{class:"material-icon"},"ÔøΩ")],-1)),s("div",te,[s("span",ne,k(a.name),1),a.code?(l(),n("span",le,k(a.code),1)):g("",!0)]),s("div",oe,[r(d(m),{variant:"ghost",size:"sm",onClick:i=>x(a)},{default:u(()=>[...e[13]||(e[13]=[p("Editar",-1)])]),_:1},8,["onClick"]),r(d(m),{variant:"ghost",size:"sm",onClick:i=>I(a.id)},{default:u(()=>[...e[14]||(e[14]=[p("Remover",-1)])]),_:1},8,["onClick"])])]),a.expanded&&a.hasChildren?(l(),n("div",ie,[(l(!0),n(b,null,L(a.childrenRendered,i=>(l(),n("div",{key:i.id,class:A(["tree-node",{"has-children":i.hasChildren}])},[s("div",de,[s("div",{class:"node-indent",style:z({width:`${i.level*20}px`})},null,4),i.hasChildren?(l(),n("button",{key:0,class:"toggle-btn",onClick:$(c=>E(i.id),["stop"])},[i.expanded?(l(),n("span",ue,"‚ñº")):(l(),n("span",ve,"‚ñ∂"))],8,re)):(l(),n("span",ce)),e[18]||(e[18]=s("div",{class:"node-icon"},[s("span",{class:"material-icon"},"üìç")],-1)),s("div",pe,[s("span",me,k(i.name),1),i.code?(l(),n("span",_e,k(i.code),1)):g("",!0)]),s("div",fe,[r(d(m),{variant:"ghost",size:"sm",onClick:c=>x(i)},{default:u(()=>[...e[16]||(e[16]=[p("Editar",-1)])]),_:1},8,["onClick"]),r(d(m),{variant:"ghost",size:"sm",onClick:c=>I(i.id)},{default:u(()=>[...e[17]||(e[17]=[p("Remover",-1)])]),_:1},8,["onClick"])])]),i.expanded&&i.hasChildren?(l(),n("div",ke,[(l(!0),n(b,null,L(i.childrenRendered,c=>(l(),n("div",{key:c.id,class:"tree-node"},[s("div",he,[s("div",{class:"node-indent",style:z({width:`${c.level*20}px`})},null,4),e[21]||(e[21]=s("span",{class:"toggle-placeholder"},null,-1)),e[22]||(e[22]=s("div",{class:"node-icon"},[s("span",{class:"material-icon"},"üìç")],-1)),s("div",Ce,[s("span",ge,k(c.name),1),c.code?(l(),n("span",ye,k(c.code),1)):g("",!0)]),s("div",be,[r(d(m),{variant:"ghost",size:"sm",onClick:S=>x(c)},{default:u(()=>[...e[19]||(e[19]=[p("Editar",-1)])]),_:1},8,["onClick"]),r(d(m),{variant:"ghost",size:"sm",onClick:S=>I(c.id)},{default:u(()=>[...e[20]||(e[20]=[p("Remover",-1)])]),_:1},8,["onClick"])])])]))),128))])):g("",!0)],2))),128))])):g("",!0)],2))),128))]))])]),_:1})]),r(d(G),{modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=a=>f.value=a),title:v.value?"Editar Local":"Novo Local",size:"md"},{footer:u(()=>[r(d(m),{variant:"ghost",onClick:e[6]||(e[6]=a=>f.value=!1)},{default:u(()=>[...e[23]||(e[23]=[p("Cancelar",-1)])]),_:1}),r(d(m),{variant:"primary",onClick:e[7]||(e[7]=a=>v.value?w():q())},{default:u(()=>[p(k(v.value?"Atualizar":"Criar"),1)]),_:1})]),default:u(()=>[s("form",{onSubmit:e[5]||(e[5]=$(a=>v.value?w():q(),["prevent"]))},[s("div",xe,[r(d(V),{modelValue:t.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.name=a),label:"Nome",placeholder:"Ex: √Årea de Produ√ß√£o, Almoxarifado, etc.",required:""},null,8,["modelValue"]),r(d(V),{modelValue:t.value.code,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.code=a),label:"C√≥digo",placeholder:"Ex: PROD-A1, ALM-01, etc."},null,8,["modelValue"]),r(d(j),{modelValue:t.value.parentId,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.parentId=a),label:"Local Pai",options:F.value,disabled:!!v.value&&d(_).locations.some(a=>v.value&&a.parentId===v.value.id)},null,8,["modelValue","options","disabled"]),r(d(V),{modelValue:t.value.description,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.description=a),label:"Descri√ß√£o",placeholder:"Breve descri√ß√£o sobre este local"},null,8,["modelValue"])])],32)]),_:1},8,["modelValue","title"])],64))}}),$e=H(Ie,[["__scopeId","data-v-7e33db27"]]);export{$e as default};
